(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(20),c=n.n(r),a=n(1),u=n.n(a),s=n(21),o=n(4),i=n(5),l=n(3),b=n(7),f=n.n(b),d="http://localhost:3001/api/persons",p=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()(d);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(d,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(d,"/").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(d,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={getAll:p,addNew:j,deletePerson:h,changePerson:m},v=(n(45),n(0)),x=function(e){var t=e.message,n=e.statusClass;return Object(v.jsx)("div",{className:n,children:t})},w=function(e){return Object(v.jsxs)("div",{children:["find person:",Object(v.jsx)("input",{type:"text",value:e.value,onInput:e.onInput})]})},k=function(e){return Object(v.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(v.jsxs)("div",{children:["name: ",Object(v.jsx)("input",{value:e.nameValue,onInput:function(t){return e.onInput(t,"name")}})]}),Object(v.jsxs)("div",{children:["number: ",Object(v.jsx)("input",{type:"number",value:e.numberValue,onInput:function(t){return e.onInput(t,"number")}})]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){return Object(v.jsxs)(v.Fragment,{children:[" ",e.persons.map((function(t,n){return t.name.toLowerCase().includes(e.filter.toLowerCase())?Object(v.jsxs)("div",{children:[Object(v.jsxs)("h2",{children:[t.name," ",t.number," ",Object(v.jsx)("button",{onClick:function(){return e.deletePerson(t)},children:"DELETE"})]})," "]},n):null}))]})},y=function(){var e=Object(l.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];function c(){return a.apply(this,arguments)}function a(){return(a=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAll().catch((function(e){console.log(e),A("error fetching data"),T("error"),r([])}));case 2:void 0!==(t=e.sent)&&r(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){c()}),[]);var b=Object(l.useState)(""),f=Object(i.a)(b,2),d=f[0],p=f[1],j=Object(l.useState)(""),h=Object(i.a)(j,2),m=h[0],y=h[1],I=Object(l.useState)(""),S=Object(i.a)(I,2),P=S[0],E=S[1],C=Object(l.useState)(""),N=Object(i.a)(C,2),V=N[0],A=N[1],D=Object(l.useState)("success"),L=Object(i.a)(D,2),J=L[0],T=L[1],B=function(e,t){var n=e.target.value;switch(t){case"name":y(n);break;case"filter":p(n);break;default:E(n)}};Object(l.useEffect)((function(){""!==V&&setTimeout((function(){A(""),T("success")}),3e3)}),[V]);var F=function(){y(""),E("")},q=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete?")){e.next=5;break}return e.next=3,O.deletePerson(t).catch((function(e){console.log(e),A("Person is already deleted"),T("error"),c()}));case 3:c(),A(t.name+" was deleted");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Phonebook"}),""===V?Object(v.jsx)("div",{}):Object(v.jsx)(x,{message:V,statusClass:J}),Object(v.jsx)(w,{value:d,onInput:function(e){return B(e,"filter")}}),Object(v.jsx)("h2",{children:"Add new"}),Object(v.jsx)(k,{onSubmit:function(e){e.preventDefault();var t=m.trim(),a=P.trim();if(n.some((function(e){return e.name===t})))window.confirm("".concat(t," is already added to phonebook, replace number with new one?"))&&O.changePerson({name:t,number:a,id:n.filter((function(e){return e.name===t}))[0].id}).then((function(e){return c()}),F(),A(t+" number was changed"));else{var u=Object(s.a)(n);O.addNew({name:t,number:a}),u.push({name:t,number:a}),r(u),F(),A(t+" added")}},nameValue:m,onInput:B,numberValue:P}),Object(v.jsx)("h2",{children:"Numbers"}),Object(v.jsx)(g,{deletePerson:q,filter:d,persons:n}),"..."]})};c.a.render(Object(v.jsx)(y,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.b10c9fc6.chunk.js.map